<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thank You</title>
</head>
<body>

<!--  https://tscerby.github.io/csat/?source=email&userEmail=testero@aol.com -->

    <h1>Thank You6!</h1>
    <p id="message"></p>

    <script>
        // Function to get all URL parameters as an object
        function getUrlParams() {
            const params = new URLSearchParams(window.location.search);
            let urlParams = {
                source: params.get('source') || 'default_source',
                userEmail: params.get('userEmail') || 'default_userEmail',
                customerWorkspaceName: params.get('customerWorkspaceName') || 'defaultWorkspace',
                agentEmail: params.get('agentEmail') || 'default_agentEmail',
                feedback_score: params.get('feedback_score') || 5,
                ticket_number: params.get('ticket_number') || 'default_ticket_number'
            };
            return urlParams;
        }

        // Get the parameters from the URL
        const params = getUrlParams();

        // Function to construct the Zapier URL dynamically
        function buildZapierUrl(baseUrl, params) {
            const queryParams = new URLSearchParams(params).toString();  // Automatically converts object to query string
            return `${baseUrl}?${queryParams}`;  // Concatenates the base URL with the query string
        }

        // Zapier webhook base URL
        const zapierBaseUrl = 'https://hooks.zapier.com/hooks/catch/12162495/2m4crtm/';

        // Build the full Zapier URL with the parameters
        const zapierFullUrl = buildZapierUrl(zapierBaseUrl, params);

        // Now send the GET request with the constructed URL
        fetch(zapierFullUrl)
            .then(response => {
                if (response.ok) {
                    return response.text();
                } else {
                    throw new Error('Request failed with status ' + response.status);
                }
            })
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });



    </script>
</body>
</html>
